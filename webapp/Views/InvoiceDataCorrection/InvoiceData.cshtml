@{
    ViewBag.Title = "WeP GST PANEL";
}

<!-- MAIN CONTENT -->
<form name="InvoiceDataCorrectionForm" id="InvoiceDataCorrectionForm" method="post" autocomplete="off">
    <div id="content">

        <!-- row -->
        <div class="row">

            <!-- col -->
            <div class="col-xs-12 col-sm-7 col-md-7 col-lg-6">
                <h1 class="page-title txt-color-blueDark">

                    <!-- PAGE HEADER -->
                    <i class="fa-fw fa fa-home"></i>
                    Invoice Correction
                    <span>
                        >&nbsp;
                        Invoice Data
                    </span>
                </h1>
            </div>
            <!-- end col -->
            <!-- right side of the page with the sparkline graphs -->
            <!-- col -->
            <!-- end col -->

        </div>
        <!-- end row -->
        <!--
                The ID "widget-grid" will start to initialize all widgets below
                You do not need to use widgets if you dont want to. Simply remove
                the <section></section> and you can use wells or panels instead
                -->
        <!-- widget grid -->
        <section id="widget-grid" class="">

            <!-- row -->
            <article class="row">

                <div class="jarviswidget jarviswidget-color-greenDark" id="wid-id-0" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                    <header>
                        <span class="widget-icon"><i class="fa fa-edit"></i></span>
                        <h2 style="font-weight:bold;">Settings</h2>
                    </header>
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->
                        </div>

                        <div class="widget-body no-padding">

                            <div id="comment-form" class="smart-form">
                                <fieldset>
                                    <div class="col-sm-6 col-md-6 col-lg-6">
                                        <div id="accordion">
                                            <div>
                                                <h4>Reconciliation Setting</h4>
                                                <div class="form-group">

                                                    <div class="row">
                                                        @if (Session["f_year"] == "FinancialYear")
                                                        {
                                                            <label class="radio radio-inline">

                                                                <input type="radio" class="radiobox" name="reconsetting" id="reconsetting" value="FinancialYear" checked>
                                                                <span style="margin-left:0px">Invoice Date</span>

                                                            </label>
                                                            <label class="radio radio-inline" style="margin-left:auto">
                                                                <input type="radio" class="radiobox" name="reconsetting" id="reconsetting" value="FinancialPeriod">
                                                                <span style="margin-left:0px">Period</span>
                                                            </label>
                                                        }

                                                        else if (Session["f_year"] == "FinancialPeriod")
                                                        {
                                                            <label class="radio radio-inline">

                                                                <input type="radio" class="radiobox" name="reconsetting" id="reconsetting" value="FinancialYear">
                                                                <span style="margin-left:0px">Invoice Date</span>

                                                            </label>
                                                            <label class="radio radio-inline" style="margin-left:auto">
                                                                <input type="radio" class="radiobox" name="reconsetting" id="reconsetting" value="FinancialPeriod" checked>
                                                                <span style="margin-left:0px">Period</span>
                                                            </label>
                                                        }
                                                        else
                                                        {
                                                            <label class="radio radio-inline">

                                                                <input type="radio" class="radiobox" name="reconsetting" id="reconsetting" value="FinancialYear" checked>
                                                                <span style="margin-left:0px">Invoice Date</span>

                                                            </label>
                                                            <label class="radio radio-inline" style="margin-left:auto">
                                                                <input type="radio" class="radiobox" name="reconsetting" id="reconsetting" value="FinancialPeriod">
                                                                <span style="margin-left:0px">Period</span>
                                                            </label>
                                                        }
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </fieldset>

                            </div>
                        </div>
                    </div>
                </div>
                <!-- NEW WIDGET START -->
                <!-- Widget ID (each widget will need unique ID)-->
                <div class="jarviswidget jarviswidget-color-teal" id="wid-id-0" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                    <header>
                        <span class="widget-icon"><i class="fa fa-edit"></i></span>
                        <h2 style="font-weight:bold;"> Invoice Number and Date Correction in Reconcilation </h2>
                    </header>

                    <!-- widget div-->
                    <div>

                        <!-- widget edit box -->
                        <div class="jarviswidget-editbox">
                            <!-- This area used as dropdown edit box -->

                        </div>
                        <!-- end widget edit box -->
                        <!-- widget content -->
                        <div class="widget-body no-padding">

                            <div id="comment-form" class="smart-form">

                                <fieldset>

                                    <div class="row">
                                        <section class="col col-3">
                                            <label class="input">GSTIN</label>
                                            <div class="col-xs-12 col-md-12 selectContainer">
                                                @Html.DropDownList("ddlGSTINNo", ViewBag.GSTINNoList as SelectList, "ALL", new { @class = "form-control" })
                                            </div>
                                        </section>
                                        <section class="col col-3" id="frm">
                                            <label class="input">From</label>
                                            <label class="input">
                                                <i class="icon-append fa fa-calendar"></i>
                                                <input type="text" name="period" id="period" value="@ViewBag.Period" placeholder="From" class="datepicker" data-dateformat='mmyy'>
                                            </label>
                                        </section>
                                        <section class="col col-3" id="to">
                                            <label class="input">To</label>
                                            <label class="input">
                                                <i class="icon-append fa fa-calendar"></i>
                                                <input type="text" name="toperiod" id="toperiod" value="@ViewBag.ToPeriod" placeholder="To" class="datepicker" data-dateformat='mmyy'>
                                            </label>
                                        </section>
                                        <section class="col col-3" id="frmdt">
                                            <label class="input">From Invoice Date</label>
                                            <label class="input">
                                                <i class="icon-append fa fa-calendar"></i>
                                                <input type="text" name="fromdate" id="fromdate" value="@ViewBag.FromDate" placeholder="From Date" class="datepicker" data-dateformat='dd-mm-yy' readonly>
                                            </label>
                                        </section>

                                        <section class="col col-3" id="todt">
                                            <label class="input">To Invoice Date</label>
                                            <label class="input">
                                                <i class="icon-append fa fa-calendar"></i>
                                                <input type="text" name="todate" id="todate" value="@ViewBag.ToDate" placeholder="To Date" class="datepicker" data-dateformat='dd-mm-yy' readonly>
                                            </label>
                                        </section>

                                        @*<section class="col col-3" id="year">
                                                <label class="col-form-label">Financial Year</label>
                                                <label class="input">
                                                    @Html.DropDownList("years", ViewBag.yearlist as SelectList, "Select", new { @class = "form-control", id = "years" })
                                                </label>
                                            </section>*@
                                        <section class="col col-3" id="sname">
                                            <label class="input">Supplier Name</label>
                                            <div class="col-xs-12 col-md-12 selectContainer">
                                                @Html.DropDownList("ddlSupplierName", ViewBag.SupplierName as SelectList, "ALL", new { @class = "form-control" })
                                            </div>
                                        </section>

                                        <section class="col col-3" id="sgstin">
                                            <label class="input">Supplier GSTIN</label>
                                            <div class="col-xs-12 col-md-12 selectContainer">
                                                @Html.DropDownList("ddlSupGSTIN", ViewBag.CTINNoList as SelectList, "ALL", new { @class = "form-control" })
                                            </div>
                                        </section>

                                        <section class="col col-3">
                                            <label class="input">Action</label>
                                            <div class="col-xs-9 col-lg-12 selectContainer">
                                                @Html.DropDownList("ddlActionType", ViewBag.ActionList as SelectList, "Select", new { @class = "form-control" })
                                            </div>
                                        </section>

                                        <section class="col col-3">
                                            <label class="input">Filter Type</label>
                                            <div class="col-xs-9 col-lg-12 selectContainer">
                                                @Html.DropDownList("strFilterType", ViewBag.FilterType as SelectList, "Select", new { @class = "form-control", autopostback = "true", @id = "strFilterType" })
                                            </div>
                                        </section>
                                        <section class="col col-3">
                                            <label class="input"></label>
                                            <div class="form-group">
                                                <input type="hidden" name="InvIds" id="InvIds" />
                                                <input type="hidden" name="InvIds2A" id="InvIds2A" />
                                                <input type="hidden" name="RefIds" id="RefIds" />
                                            </div>
                                        </section>
                                    </div>

                                </fieldset>

                                <footer>
                                    <button type="button" id="ViewDetails" name="ViewDetails" value="View Details" class="btn btn-primary pull-left" style="border-radius:13px; font-weight:600">
                                        View Details
                                    </button>

                                    <button type="button" id="Accept2_2a" name="Accept2_2a" value="Accept" class="btn btn-primary pull-left" style="border-radius:13px;font-weight:600">
                                        Accept from GSTR2A to GSTR2
                                    </button>

                                    <button type="button" id="Back" name="Back" value="Back" class="btn btn-primary pull-right" style="border-radius:13px; font-weight:600">
                                        Back
                                    </button>
                                </footer>
                            </div>
                        </div>
                        <!-- end widget content -->
                    </div>
                    <!-- end widget div -->
                </div>

                <div class="jarviswidget jarviswidget-color-blueLight" id="newgstr2_2a" name="newgstr2_2a" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                        <h2 style="font-weight:bold;">Matched Invoices in GSTR-2 and GSTR-2A</h2>
                    </header>

                    <div class="container-fuild" style="background-color:white; overflow:scroll;">
                        <table id="TBL_INVOICEDATACORRECTION" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <td colspan="1" class="upload" style="text-align:center"><b>#</b></td>
                                    <td colspan="9" class="upload" style="text-align:center"><b>My Data</b></td>
                                    <td colspan="8" class="upload" style="text-align:center"><b>Supplier's Data</b></td>
                                </tr>
                                <tr id="TD_B2B">
                                    <td align="center"><input type="checkbox" id="chkSelectAll" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>

                                </tr>
                                <tr id="TD_CDNR">
                                    <td align="center"><input type="checkbox" id="chkSelectAll" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                </tr>
                            </thead>
                        </table>

                    </div>
                    <br />
                    <br />
                    <footer>
                        <button type="button" id="Accept" name="Accept" value="Accept" class="btn btn-primary pull-right" style="border-radius:13px;font-weight:600">
                            Accept from GSTR2A to GSTR2
                        </button>

                        <button type="submit" id="Export" name="Export" value="Export" class="btn btn-primary pull-right" style="border-radius:13px; font-weight:600">
                            Export
                        </button>
                    </footer>
                    <!-- end widget div -->
                </div>

                <div class="jarviswidget jarviswidget-color-blueLight" id="newgstr2_2a_duplicate" name="newgstr2_2a_duplicate" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                        <h2 style="font-weight:bold;">Many Matched Invoices in GSTR-2 and GSTR-2A</h2>
                    </header>

                    <div class="container-fuild" style="background-color:white; overflow:scroll;">
                        <table id="TBL_INVOICEDATACORRECTION_SOME" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <td colspan="1" class="upload" style="text-align:center"><b>#</b></td>
                                    <td colspan="9" class="upload" style="text-align:center"><b>My Data</b></td>
                                    <td colspan="8" class="upload" style="text-align:center"><b>Supplier's Data</b></td>
                                </tr>
                                <tr id="TD_B2B_FP">
                                    <td align="center"><input type="hidden" id="chkSelectAll_inum" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>

                                </tr>
                                <tr id="TD_CDNR_FP">
                                    <td align="center"><input type="hidden" id="chkSelectAll_inum" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                </tr>
                            </thead>
                        </table>

                    </div>
                    <br />
                    <br />
                    <footer>
                        <button type="button" id="Accept_inum" name="Accept_inum" value="Accept" class="btn btn-primary pull-right" style="border-radius:13px;font-weight:600">
                            Accept from GSTR2A to GSTR2
                        </button>

                        <button type="submit" id="Exportsome" name="Exportsome" value="Exportsome" class="btn btn-primary pull-right" style="border-radius:13px; font-weight:600">
                            Export
                        </button>
                    </footer>

                    <!-- end widget div -->
                </div>

                <div class="jarviswidget jarviswidget-color-blueLight" id="newgstr2_idt" name="newgstr2_idt" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                        <h2 style="font-weight:bold;">Matched Invoices in GSTR-2 and GSTR-2A</h2>
                    </header>

                    <div class="container-fuild" style="background-color:white; overflow:scroll;">
                        <table id="TBL_INVOICEDATACORRECTION_IDT" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <td colspan="1" class="upload" style="text-align:center"><b>#</b></td>
                                    <td colspan="9" class="upload" style="text-align:center"><b>My Data</b></td>
                                    <td colspan="8" class="upload" style="text-align:center"><b>Supplier's Data</b></td>
                                </tr>
                                <tr id="TD_B2B_IDT">
                                    <td align="center"><input type="checkbox" id="chkSelectAll_idt" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>

                                </tr>
                                <tr id="TD_CDNR_IDT">
                                    <td align="center"><input type="checkbox" id="chkSelectAll_idt" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                </tr>
                            </thead>
                        </table>
                    </div>
                    <br />
                    <br />
                    <footer>
                        <button type="button" id="Accept_idt" name="Accept_idt" value="Accept" class="btn btn-primary pull-right" style="border-radius:13px;font-weight:600">
                            Accept from GSTR2A to GSTR2
                        </button>

                        <button type="submit" id="Export" name="Export" value="Export" class="btn btn-primary pull-right" style="border-radius:13px; font-weight:600">
                            Export
                        </button>
                    </footer>
                    <!-- end widget div -->
                    <!-- end widget div -->
                </div>

                <div class="jarviswidget jarviswidget-color-blueLight" id="newgstr2_idt_duplicate" name="newgstr2_idt_duplicate" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                    <header>
                        <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                        <h2 style="font-weight:bold;">Many Matched Invoices in GSTR-2 and GSTR-2A</h2>
                    </header>

                    <div class="container-fuild" style="background-color:white; overflow:scroll;">
                        <table id="TBL_INVOICEDATACORRECTION_IDTSOME" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                            <thead>
                                <tr>
                                    <td colspan="1" class="upload" style="text-align:center"><b>#</b></td>
                                    <td colspan="9" class="upload" style="text-align:center"><b>My Data</b></td>
                                    <td colspan="8" class="upload" style="text-align:center"><b>Supplier's Data</b></td>
                                </tr>
                                <tr id="TD_B2B_IDT_DUP">
                                    <td align="center"><input type="hidden" id="chkSelectAll_idtdup" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>POS</th>
                                    <th>Invoice Type</th>

                                </tr>
                                <tr id="TD_CDNR_IDT_DUP">
                                    <td align="center"><input type="hidden" id="chkSelectAll_idtdup" /></td>
                                    <th>GSTIN</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                    <th>Supplier GSTIN</th>
                                    <th>Note Number</th>
                                    <th>Note Date</th>
                                    <th>Invoice No</th>
                                    <th>Invoice Date</th>
                                    <th>Invoice Value</th>
                                    <th>Taxable Value</th>
                                    <th>Total Tax Amount</th>
                                </tr>
                            </thead>
                        </table>

                    </div>

                    <br />
                    <br />
                    <footer>
                        <button type="button" id="Accept_idtdup" name="Accept_idtdup" value="Accept" class="btn btn-primary pull-right" style="border-radius:13px;font-weight:600">
                            Accept from GSTR2A to GSTR2
                        </button>

                        <button type="submit" id="Exportsome" name="Exportsome" value="Exportsome" class="btn btn-primary pull-right" style="border-radius:13px; font-weight:600">
                            Export
                        </button>
                    </footer>
                    <!-- end widget div -->
                    <!-- end widget div -->
                </div>

                <!-- end row -->
            </article>

            <div class="oldGrid" id="oldGrid">


                <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6" id="oldgrids">
                    <div class="jarviswidget jarviswidget-color-blueLight" id="oldgstr2" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">
                        <header>
                            <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                            <h2 style="font-weight:bold;">Missing Invoices in GSTR2 (Supplier's Data)</h2>
                        </header>

                        <div class="container-fuild" style="background-color:white; overflow:scroll;">
                            <table id="TBL_MISSINGIN2" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                                <thead>
                                    <tr id="TD_B2B_GSTR2">
                                        <th>Select</th>
                                        <th>#</th>
                                        <th>GSTIN</th>
                                        <th>Supplier GSTIN</th>
                                        <th>Invoice No</th>
                                        <th>Invoice Date</th>
                                        <th>Invoice Value</th>
                                        <th>Taxable Value</th>
                                        <th>Total Tax Amount</th>
                                        <th>POS</th>
                                        <th>Invoice Type</th>
                                    </tr>
                                    <tr id="TD_CDNR_GSTR2">
                                        <th>Select</th>
                                        <th>#</th>
                                        <th>GSTIN</th>
                                        <th>Supplier GSTIN</th>
                                        <th>Note Number</th>
                                        <th>Note date</th>
                                        <th>Invoice No</th>
                                        <th>Invoice Date</th>
                                        <th>Invoice Value</th>
                                        <th>Taxable Value</th>
                                        <th>Total Tax Amount</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </article>


                <article class="col-xs-6 col-sm-6 col-md-6 col-lg-6" id="oldgrids2a">
                    <div class="jarviswidget jarviswidget-color-blueLight" id="oldgstr2a" data-widget-editbutton="false" data-widget-custombutton="false" data-widget-deletebutton="false">

                        <header>
                            <span class="widget-icon"> <i class="fa fa-edit"></i> </span>
                            <h2 style="font-weight:bold;">Missing Invoices in GSTR2A (My Data)</h2>
                        </header>

                        <div class="container-fuild" style="background-color:white; overflow:scroll;">
                            <table id="TBL_MISSINGIN2A" class="table table-striped table-bordered dt-responsive nowrap" width="100%" cellspacing="0">
                                <thead>
                                    <tr id="TD_B2B_GSTR2A">
                                        <th>Select</th>
                                        <th>#</th>
                                        <th>GSTIN</th>
                                        <th>Supplier GSTIN</th>
                                        <th>Invoice No</th>
                                        <th>Invoice Date</th>
                                        <th>Invoice Value</th>
                                        <th>Taxable Value</th>
                                        <th>Total Tax Amount</th>
                                        <th>POS</th>
                                        <th>Invoice Type</th>
                                    </tr>
                                    <tr id="TD_CDNR_GSTR2A">
                                        <th>Select</th>
                                        <th>#</th>
                                        <th>GSTIN</th>
                                        <th>Supplier GSTIN</th>
                                        <th>Note Number</th>
                                        <th>Note date</th>
                                        <th>Invoice No</th>
                                        <th>Invoice Date</th>
                                        <th>Invoice Value</th>
                                        <th>Taxable Value</th>
                                        <th>Total Tax Amount</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </article>
            </div>
        </section>
        <!-- end widget grid -->
    </div>
</form>

<!-- END MAIN CONTENT -->
<script type="text/javascript" language="javascript">

    $(document).ready(function () {

        var filter = $("#strFilterType").val();

        $("#TBL_INVOICEDATACORRECTION").hide();
        $("#TBL_INVOICEDATACORRECTION_IDT").hide();

        $("#TBL_INVOICEDATACORRECTION_IDTSOME").hide();
        $("#TBL_INVOICEDATACORRECTION_SOME").hide();

        $("#TBL_MISSINGIN2A").hide();
        $("#TBL_MISSINGIN2").hide();

        $("#TD_B2B").hide();
        $("#TD_CDNR").hide();

        $("#TD_B2B_FP").hide();
        $("#TD_CDNR_FP").hide();

        $("#TD_B2B_IDT").hide();
        $("#TD_CDNR_IDT").hide();

        $("#TD_B2B_IDT_DUP").hide();
        $("#TD_CDNR_IDT_DUP").hide();

        $("#TD_B2B_GSTR2").hide();
        $("#TD_CDNR_GSTR2").hide();

        $("#TD_B2B_GSTR2A").hide();
        $("#TD_CDNR_GSTR2A").hide();

        $("#oldgstr2").hide();
        $("#oldgstr2a").hide();

        $("#newgstr2_idt").hide();
        $("#newgstr2_idt_duplicate").hide();

        $("#newgstr2_2a").hide();
        $("#newgstr2_2a_duplicate").hide();

        $("#oldgrid").hide();
        $("#oldgrids").hide();
        $("#oldgrids2a").hide();
        $("#Accept2_2a").hide();

        $.urlParam = function (name) {
            var results = new RegExp('[\?&]' + name + '=([^&#]*)').exec(window.location.href);
            if (results == null) {
                return null;
            }
            else {
                return decodeURI(results[1]) || 0;
            }
        }
        var URLRedirectName = $.urlParam('Page');

        if (URLRedirectName == "ViewDetails") {

            $("#divLoading").show();
            ProcessingData();
        }

        $("#chkSelectAll").click(function () {
            var table = $("#TBL_INVOICEDATACORRECTION").DataTable();
            var filtervalue = table.search();

            if (filtervalue != "") {
                var cols = $("#TBL_INVOICEDATACORRECTION").DataTable().rows({ search: 'applied' }).nodes();
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = this.checked;
                }
            }
            else {
                var cols = $("#TBL_INVOICEDATACORRECTION").DataTable().column(0).nodes(),
                    state = this.checked;
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = state;
                }
            }
        });

        $('.chkSelectAll').click(function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll").prop("checked", false);
            }
        });

        $("#TBL_INVOICEDATACORRECTION").on("click", ".chkSelectAll", function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll").prop("checked", false);
            }
        });

        $("#chkSelectAll_inum").click(function () {
            var table = $("#TBL_INVOICEDATACORRECTION_SOME").DataTable();
            var filtervalue = table.search();

            if (filtervalue != "") {
                var cols = $("#TBL_INVOICEDATACORRECTION_SOME").DataTable().rows({ search: 'applied' }).nodes();
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='radio']").checked = this.checked;
                }
            }
            else {
                var cols = $("#TBL_INVOICEDATACORRECTION_SOME").DataTable().column(0).nodes(),
                    state = this.checked;
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='radio']").checked = state;
                }
            }
        });

        $('.chkSelectAll_inum').click(function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_inum").prop("checked", false);
            }
        });

        $("#TBL_INVOICEDATACORRECTION_SOME").on("click", ".chkSelectAll_inum", function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_inum").prop("checked", false);
            }
        });


        $("#chkSelectAll_gstr2").click(function () {
            var table = $("#TBL_MISSINGIN2").DataTable();
            var filtervalue = table.search();

            if (filtervalue != "") {
                var cols = $("#TBL_MISSINGIN2").DataTable().rows({ search: 'applied' }).nodes();
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = this.checked;
                }
            }
            else {
                var cols = $("#TBL_MISSINGIN2").DataTable().column(0).nodes(),
                    state = this.checked;
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = state;
                }
            }
        });

        $('.chkSelectAll_gstr2').click(function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_gstr2").prop("checked", false);
            }
        });

        $("#TBL_MISSINGIN2").on("click", ".chkSelectAll_gstr2", function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_gstr2").prop("checked", false);
            }
        });

        $("#chkSelectAll2A_gstr2a").click(function () {
            var table = $("#TBL_MISSINGIN2A").DataTable();
            var filtervalue = table.search();

            if (filtervalue != "") {
                var cols = $("#TBL_MISSINGIN2A").DataTable().rows({ search: 'applied' }).nodes();
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = this.checked;
                }
            }
            else {
                var cols = $("#TBL_MISSINGIN2A").DataTable().column(0).nodes(),
                    state = this.checked;
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = state;
                }
            }
        });

        $('.chkSelectAll2A_gstr2a').click(function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll2A_gstr2a").prop("checked", false);
            }
        });

        $("#TBL_MISSINGIN2A").on("click", ".chkSelectAll2A_gstr2a", function () {
            debugger;
            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll2A_gstr2a").prop("checked", false);
            }
        });

        $("#chkSelectAll_idt").click(function () {
            var table = $("#TBL_INVOICEDATACORRECTION_IDT").DataTable();
            var filtervalue = table.search();

            if (filtervalue != "") {
                var cols = $("#TBL_INVOICEDATACORRECTION_IDT").DataTable().rows({ search: 'applied' }).nodes();
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = this.checked;
                }
            }
            else {
                var cols = $("#TBL_INVOICEDATACORRECTION_IDT").DataTable().column(0).nodes(),
                    state = this.checked;
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='checkbox']").checked = state;
                }
            }
        });

        $('.chkSelectAll_idt').click(function () {

            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_idt").prop("checked", false);
            }
        });

        $("#TBL_INVOICEDATACORRECTION_IDT").on("click", ".chkSelectAll_idt", function () {

            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_idt").prop("checked", false);
            }
        });

        $("#chkSelectAll_idtdup").click(function () {
            var table = $("#TBL_INVOICEDATACORRECTION_IDTSOME").DataTable();
            var filtervalue = table.search();

            if (filtervalue != "") {
                var cols = $("#TBL_INVOICEDATACORRECTION_IDTSOME").DataTable().rows({ search: 'applied' }).nodes();
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='radio']").checked = this.checked;
                }
            }
            else {
                var cols = $("#TBL_INVOICEDATACORRECTION_IDTSOME").DataTable().column(0).nodes(),
                    state = this.checked;
                for (var i = 0; i < cols.length; i += 1) {
                    cols[i].querySelector("input[type='radio']").checked = state;
                }
            }
        });

        $('.chkSelectAll_idtdup').click(function () {

            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_idtdup").prop("checked", false);
            }
        });

        $("#TBL_INVOICEDATACORRECTION_IDTSOME").on("click", ".chkSelectAll_idtdup", function () {

            var status = this.checked;
            if (status == false) {
                $("#chkSelectAll_idtdup").prop("checked", false);
            }
        });

        $("#ViewDetails").click(function () {

            $("#divLoading").show();
            ProcessingData();

        });

        $("#ddlSupplierName").change(function () {
            LoadingData();
            window.location.reload(true);
        });

        $("#Accept_idt").click(function () {
            debugger;
            $("#divLoading").show();
            var selectIds = '|';

            var cols = $("#TBL_INVOICEDATACORRECTION_IDT").DataTable().column(0).nodes();
            for (var i = 0; i < cols.length; i += 1) {
                if (cols[i].querySelector("input[type='checkbox']").checked == true) {
                    var chkVal = cols[i].querySelector("input[type='checkbox']").value;
                    selectIds = selectIds + chkVal + '|'
                }
            }

            $("#InvIds").val();
            $("#InvIds").val(selectIds);
            ProcessingData("Accept_idt");
        });
        $("#Accept_idtdup").click(function () {
            debugger;
            $("#divLoading").show();
            var selectIds = '|';
            var cols_idtdup = $("#TBL_INVOICEDATACORRECTION_IDTSOME").DataTable().column(0).nodes();
            for (var i = 0; i < cols_idtdup.length; i += 1) {
                if (cols_idtdup[i].querySelector("input[type='radio']").checked == true) {
                    var chkVal = cols_idtdup[i].querySelector("input[type='radio']").value;
                    selectIds = selectIds + chkVal + '|'
                }
            }

            $("#InvIds").val();
            $("#InvIds").val(selectIds);
            ProcessingData("Accept_idtdup");
        });

        $("#Accept2_2a").click(function () {
            debugger;
            $("#divLoading").show();
            var selectIds = ',';
            var selectIds2a = ',';

            var cols_gstr2 = $("#TBL_MISSINGIN2").DataTable().column(0).nodes();

            for (var i = 0; i < cols_gstr2.length; i += 1) {
                if (cols_gstr2[i].querySelector("input[type='checkbox']").checked == true) {
                    var chkVal = cols_gstr2[i].querySelector("input[type='checkbox']").value;
                    selectIds = selectIds + chkVal + ','
                }
            }
            var cols_gstr2a = $("#TBL_MISSINGIN2A").DataTable().column(0).nodes();

            for (var i = 0; i < cols_gstr2a.length; i += 1) {
                if (cols_gstr2a[i].querySelector("input[type='checkbox']").checked == true) {
                    var chkVal2a = cols_gstr2a[i].querySelector("input[type='checkbox']").value;
                    selectIds2a = selectIds2a + chkVal2a + ','
                }
            }

            $("#InvIds").val();
            $("#InvIds").val(selectIds);

            $("#InvIds2A").val();
            $("#InvIds2A").val(selectIds2a);
            console.log(selectIds);

            ProcessingData("Accept2_2a");
        });

        $("#Accept").click(function () {
            debugger;
            $("#divLoading").show();
            var selectIds = '|';
            var cols = $("#TBL_INVOICEDATACORRECTION").DataTable().column(0).nodes();
            for (var i = 0; i < cols.length; i += 1) {
                if (cols[i].querySelector("input[type='checkbox']").checked == true) {
                    var chkVal = cols[i].querySelector("input[type='checkbox']").value;
                    selectIds = selectIds + chkVal + '|'
                }
            }

            $("#InvIds").val();
            $("#InvIds").val(selectIds);
            ProcessingData("Accept");
        });

        $("#Accept_inum").click(function () {
            debugger;
            $("#divLoading").show();
            var selectIds = '|';
            var cols = $("#TBL_INVOICEDATACORRECTION_SOME").DataTable().column(0).nodes();
            for (var i = 0; i < cols.length; i += 1) {
                if (cols[i].querySelector("input[type='radio']").checked == true) {
                    var chkVal = cols[i].querySelector("input[type='radio']").value;
                    selectIds = selectIds + chkVal + '|'
                }
            }

            $("#InvIds").val();
            $("#InvIds").val(selectIds);
            ProcessingData("Accept_inum");
        });


        $("#Back").click(function () {
            $("#divLoading").show();
            document.location.href = '/GSTR2/Reconcilation?Page=ViewDetails';
        });
    });

    function ProcessingData(ButtonType) {

        var frmdata = new FormData();
        var radio = $("input[type=radio][name='reconsetting']:checked").val();
        var filter = $("#strFilterType").val();

        if (ButtonType != null) {

            frmdata.append("InvIds", $("#InvIds").val());
            frmdata.append("InvIds2A", $("#InvIds2A").val());
            frmdata.append("RefIds", $("#RefIds").val());

            if (ButtonType == "Accept_idt") {

                frmdata.append("Accept", $("#Accept_idt").val());
            }
            if (ButtonType == "Accept_idtdup") {

                frmdata.append("Accept", $("#Accept_idtdup").val());
            }
            if (ButtonType == "Accept2_2a") {

                frmdata.append("Accept", $("#Accept2_2a").val());
            }
            if (ButtonType == "Accept") {

                frmdata.append("Accept", $("#Accept").val());
            }
            if (ButtonType == "Accept_inum") {

                frmdata.append("Accept", $("#Accept_inum").val());
            }
        }

        if (filter == "2") {

            if (radio == "FinancialPeriod") {

                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", radio);
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                frmdata.append("ddlActionType", $("#ddlActionType").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }
            else if (radio == "FinancialYear") {

                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                // frmdata.append("years", $("#years").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", radio);
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("ddlActionType", $("#ddlActionType").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }

            else {
                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                //frmdata.append("years", $("#years").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", $("#reconsetting").val());
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }
            var action = $("#ddlActionType").val();
            if (action == "B2B") {

                $("#TD_B2B").show();
                $("#TD_CDNR").hide();
                $("#TD_B2B_FP").show();
                $("#TD_CDNR_FP").hide();

            }
            if (action == "CDNR") {
                $("#TD_B2B").hide();
                $("#TD_CDNR").show();
                $("#TD_B2B_FP").hide();
                $("#TD_CDNR_FP").show();
            }
            $.ajax
                ({
                    url: '/InvoiceDataCorrection/InvoiceData',
                    type: "POST",
                    contentType: false,
                    data: frmdata,
                    processData: false,
                    success: function (resp) {
                        $("#divLoading").hide();
                        if (resp.success) {
                            if (ButtonType != null) {
                                swal({
                                    title: "",
                                    text: resp.SuccessMessage,
                                    type: "success",
                                    confirm: {
                                        text: "OK",
                                        value: true,
                                        visible: true,
                                        className: "",
                                        closeModal: true,
                                    },
                                    confirmButtonColor: "#DD6B55",
                                    confirmButtonText: "OK",
                                    closeOnConfirm: true,
                                });
                            }

                            $("#newgstr2_2a").show();
                            $("#newgstr2_2a_duplicate").show();

                            $("#TBL_INVOICEDATACORRECTION").show();
                            $("#TBL_INVOICEDATACORRECTION_SOME").show();

                            LoadGrid(resp.data);

                            $("#oldgstr2").hide();
                            $("#oldgstr2a").hide();
                            $("#newgstr2_idt").hide();
                            $("#newgstr2_idt_duplicate").hide();
                            $("#Accept2_2a").hide();

                        }
                        else {
                            swal({
                                title: "",
                                text: resp.ErrorMessage,
                                type: "error",
                                confirm: {
                                    text: "OK",
                                    value: true,
                                    visible: true,
                                    className: "",
                                    closeModal: true,
                                },
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "OK",
                                closeOnConfirm: true,
                            });
                        }
                    },
                    error: function (xhr) {
                        $("#divLoading").hide();
                        alert(xhr.statusText);
                    }
                })
        }

        else if (filter == "3") {

            if (radio == "FinancialPeriod") {

                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", radio);
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                frmdata.append("ddlActionType", $("#ddlActionType").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }
            else if (radio == "FinancialYear") {

                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                //frmdata.append("years", $("#years").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", radio);
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("ddlActionType", $("#ddlActionType").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }

            else {
                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                //frmdata.append("years", $("#years").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", $("#reconsetting").val());
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }

            var action = $("#ddlActionType").val();
            if (action == "B2B") {

                $("#TD_B2B_IDT").show();
                $("#TD_CDNR_IDT").hide();
                $("#TD_B2B_IDT_DUP").show();
                $("#TD_CDNR_IDT_DUP").hide();
            }
            if (action == "CDNR") {
                $("#TD_B2B_IDT").hide();
                $("#TD_CDNR_IDT").show();
                $("#TD_B2B_IDT_DUP").hide();
                $("#TD_CDNR_IDT_DUP").show();
            }
            $.ajax
                ({
                    url: '/InvoiceDataCorrection/InvoiceData',
                    type: "POST",
                    contentType: false,
                    data: frmdata,
                    processData: false,
                    success: function (resp) {
                        $("#divLoading").hide();
                        if (resp.success) {
                            if (ButtonType != null) {
                                swal({
                                    title: "",
                                    text: resp.SuccessMessage,
                                    type: "success",
                                    confirm: {
                                        text: "OK",
                                        value: true,
                                        visible: true,
                                        className: "",
                                        closeModal: true,
                                    },
                                    confirmButtonColor: "#DD6B55",
                                    confirmButtonText: "OK",
                                    closeOnConfirm: true,
                                });
                            }

                            $("#newgstr2_idt").show();
                            $("#newgstr2_idt_duplicate").show();

                            $("#TBL_INVOICEDATACORRECTION_IDT").show();
                            $("#TBL_INVOICEDATACORRECTION_IDTSOME").show();

                            LoadGrid(resp.data);

                            $("#oldgstr2").hide();
                            $("#oldgstr2a").hide();
                            $("#newgstr2_2a").hide();
                            $("#newgstr2_2a_duplicate").hide();
                            $("#Accept2_2a").hide();

                        }
                        else {
                            swal({
                                title: "",
                                text: resp.ErrorMessage,
                                type: "error",
                                confirm: {
                                    text: "OK",
                                    value: true,
                                    visible: true,
                                    className: "",
                                    closeModal: true,
                                },
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "OK",
                                closeOnConfirm: true,
                            });
                        }
                    },
                    error: function (xhr) {
                        $("#divLoading").hide();
                        alert(xhr.statusText);
                    }
                })
        }

        else {

            if (radio == "FinancialPeriod") {

                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", radio);
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                frmdata.append("ddlActionType", $("#ddlActionType").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }
            else if (radio == "FinancialYear") {

                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                //frmdata.append("years", $("#years").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", radio);
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("ddlActionType", $("#ddlActionType").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }

            else {
                frmdata.append("ddlGSTINNo", $("#ddlGSTINNo").val());
                frmdata.append("fromdate", $("#fromdate").val());
                frmdata.append("todate", $("#todate").val());
                //frmdata.append("years", $("#years").val());
                frmdata.append("ddlSupplierName", $("#ddlSupplierName").val());
                frmdata.append("ddlSupGSTIN", $("#ddlSupGSTIN").val());
                frmdata.append("reconsetting", $("#reconsetting").val());
                frmdata.append("period", $("#period").val());
                frmdata.append("toperiod", $("#toperiod").val());
                frmdata.append("strFilterType", $("#strFilterType").val());
            }

            var action = $("#ddlActionType").val();

            if (action == "B2B") {

                $("#TD_B2B_GSTR2").show();
                $("#TD_CDNR_GSTR2").hide();
                $("#TD_B2B_GSTR2A").show();
                $("#TD_CDNR_GSTR2A").hide();
            }
            if (action == "CDNR") {

                $("#TD_B2B_GSTR2").hide();
                $("#TD_CDNR_GSTR2").show();
                $("#TD_B2B_GSTR2A").hide();
                $("#TD_CDNR_GSTR2A").show();
            }
            $.ajax
                ({
                    url: '/InvoiceDataCorrection/InvoiceData',
                    type: "POST",
                    contentType: false,
                    data: frmdata,
                    processData: false,
                    success: function (resp) {
                        console.log(resp);
                        $("#divLoading").hide();
                        if (resp.success) {

                            if (ButtonType != null) {
                                swal({
                                    title: "",
                                    text: resp.SuccessMessage,
                                    type: "success",
                                    confirm: {
                                        text: "OK",
                                        value: true,
                                        visible: true,
                                        className: "",
                                        closeModal: true,
                                    },
                                    confirmButtonColor: "#DD6B55",
                                    confirmButtonText: "OK",
                                    closeOnConfirm: true,
                                });
                            }
                            $("#oldgrid").show();
                            $("#oldgrids").show();
                            $("#oldgrids2a").show();
                            $("#oldgstr2").show();
                            $("#oldgstr2a").show();
                            $("#TBL_MISSINGIN2").show();
                            $("#TBL_MISSINGIN2A").show();
                            $("#Accept2_2a").show();

                            LoadGrid(resp.data);

                            $("#newgstr2_2a").hide();
                            $("#newgstr2_2a_duplicate").hide();
                            $("#newgstr2_idt").hide();
                            $("#newgstr2_idt_duplicate").hide();

                        }
                        else {
                            swal({
                                title: "",
                                text: resp.ErrorMessage,
                                type: "error",
                                confirm: {
                                    text: "OK",
                                    value: true,
                                    visible: true,
                                    className: "",
                                    closeModal: true,
                                },
                                confirmButtonColor: "#DD6B55",
                                confirmButtonText: "OK",
                                closeOnConfirm: true,
                            });
                        }
                    },
                    error: function (xhr) {
                        $("#divLoading").hide();
                        alert(xhr.statusText);
                    }
                })
        }
    }

    function LoadGrid(ResData) {
        var actiontype = $("#ddlActionType").val();
        var filter = $("#strFilterType").val();

        if (actiontype == "B2B" && filter == "2") {

            $('#TBL_INVOICEDATACORRECTION').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="InvID" id="InvID" class="chkSelectAll" value="' + data + '" />';
                        }
                    },

                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "pos2" },
                    { "mData": "inv_typ2" },
                    { "mData": "ctin2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" },
                    { "mData": "pos2a" },
                    { "mData": "inv_typ2a" }
                ]
            });

            $('#TBL_INVOICEDATACORRECTION_SOME').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices_some,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_inum',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="radio" name="InvID" id="InvID" class="chkSelectAll_inum" value="' + data + '" />';
                        }
                    },

                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "pos2" },
                    { "mData": "inv_typ2" },
                    { "mData": "ctin2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" },
                    { "mData": "pos2a" },
                    { "mData": "inv_typ2a" }
                ]
            });
        }
        else if (actiontype == "CDNR" && filter == "2") {
            $('#TBL_INVOICEDATACORRECTION').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="InvID" id="InvID" class="chkSelectAll" value="' + data + '" />';
                        }
                    },
                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "nt_num2" },
                    { "mData": "nt_dt2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "ctin2a" },
                    { "mData": "nt_num2a" },
                    { "mData": "nt_dt2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" }
                ]
            });

            $('#TBL_INVOICEDATACORRECTION_SOME').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices_some,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_inum',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="radio" name="InvID" id="InvID" class="chkSelectAll_inum" value="' + data + '" />';
                        }
                    },
                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "nt_num2" },
                    { "mData": "nt_dt2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "ctin2a" },
                    { "mData": "nt_num2a" },
                    { "mData": "nt_dt2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" }
                ]
            });
        }

        else if (actiontype == "B2B" && filter == "3") {

            $('#TBL_INVOICEDATACORRECTION_IDT').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices_idt,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_idt',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="InvID" id="InvID" class="chkSelectAll_idt" value="' + data + '" />';
                        }
                    },

                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "pos2" },
                    { "mData": "inv_typ2" },
                    { "mData": "ctin2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" },
                    { "mData": "pos2a" },
                    { "mData": "inv_typ2a" }
                ]
            });

            $('#TBL_INVOICEDATACORRECTION_IDTSOME').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices_idt_duplicate,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_idtdup',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="radio" name="InvID" id="InvID" class="chkSelectAll_idtdup" value="' + data + '" />';
                        }
                    },

                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "pos2" },
                    { "mData": "inv_typ2" },
                    { "mData": "ctin2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" },
                    { "mData": "pos2a" },
                    { "mData": "inv_typ2a" }
                ]
            });
        }
        else if (actiontype == "CDNR" && filter == "3") {
            $('#TBL_INVOICEDATACORRECTION_IDT').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices_idt,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_idt',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="InvID" id="InvID" class="chkSelectAll_idt" value="' + data + '" />';
                        }
                    },
                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "nt_num2" },
                    { "mData": "nt_dt2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "ctin2a" },
                    { "mData": "nt_num2a" },
                    { "mData": "nt_dt2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" }
                ]
            });

            $('#TBL_INVOICEDATACORRECTION_IDTSOME').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionMatchedInvoices_idt_duplicate,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_idtdup',
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="radio" name="InvID" id="InvID" class="chkSelectAll_idtdup" value="' + data + '" />';
                        }
                    },
                    { "mData": "gstin2" },
                    { "mData": "ctin2" },
                    { "mData": "nt_num2" },
                    { "mData": "nt_dt2" },
                    { "mData": "inum2" },
                    { "mData": "idt2" },
                    { "mData": "val2" },
                    { "mData": "txval2" },
                    { "mData": "TotaltaxAmount2" },
                    { "mData": "ctin2a" },
                    { "mData": "nt_num2a" },
                    { "mData": "nt_dt2a" },
                    { "mData": "inum2a" },
                    { "mData": "idt2a" },
                    { "mData": "val2a" },
                    { "mData": "txval2a" },
                    { "mData": "TotaltaxAmount2a" }
                ]
            });
        }

        else if (actiontype == "B2B" && filter == "1") {
            $('#TBL_MISSINGIN2').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionAllInvoicesGSTR2,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_gstr2',
                        "data": 'invid',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="ids" id="ids" class="chkSelectAll_gstr2" value="' + data + '" />';
                        }
                    },
                    {
                        "targets": 1,
                        "visible": false,
                        "searchable": false,
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="hidden" name="RefIds" id="RefIds" value="' + data + '" />';
                        },
                    },
                    { "mData": "gstin" },
                    { "mData": "ctin" },
                    { "mData": "inum" },
                    { "mData": "idt" },
                    { "mData": "val" },
                    { "mData": "txval" },
                    { "mData": "TotaltaxAmount" },
                    { "mData": "pos" },
                    { "mData": "inv_typ" }
                ]
            });

            $('#TBL_MISSINGIN2A').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionAllInvoicesGSTR2A,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll2A_gstr2a',
                        "data": 'invid',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="ids" id="ids" class="chkSelectAll_gstr2a" value="' + data + '" />';
                        }
                    },
                    {
                        "targets": 1,
                        "visible": false,
                        "searchable": false,
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="hidden" name="RefIds" id="RefIds" value="' + data + '" />';
                        },
                    },
                    { "mData": "gstin" },
                    { "mData": "ctin" },
                    { "mData": "inum" },
                    { "mData": "idt" },
                    { "mData": "val" },
                    { "mData": "txval" },
                    { "mData": "TotaltaxAmount" },
                    { "mData": "pos" },
                    { "mData": "inv_typ" }
                ]
            });
        }
        else if (actiontype == "CDNR" && filter == "1") {
            $('#TBL_MISSINGIN2').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionAllInvoicesGSTR2,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_gstr2',
                        "data": 'invid',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="InvID" id="InvID" class="chkSelectAll_gstr2" value="' + data + '" />';
                        }
                    },
                    {
                        "targets": 1,
                        "visible": false,
                        "searchable": false,
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="hidden" name="RefIds" id="RefIds" value="' + data + '" />';
                        },
                    },
                    { "mData": "gstin" },
                    { "mData": "ctin" },
                    { "mData": "nt_num" },
                    { "mData": "nt_dt" },
                    { "mData": "inum" },
                    { "mData": "idt" },
                    { "mData": "val" },
                    { "mData": "txval" },
                    { "mData": "TotaltaxAmount" }
                ]
            });

            $('#TBL_MISSINGIN2A').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionAllInvoicesGSTR2A,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll2A_gstr2a',
                        "data": 'invid',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="InvID2A" id="InvID2A" class="chkSelectAll2A_gstr2a" value="' + data + '" />';
                        }
                    },
                    {
                        "targets": 1,
                        "visible": false,
                        "searchable": false,
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="hidden" name="RefIds" id="RefIds" value="' + data + '" />';
                        },
                    },
                    { "mData": "gstin" },
                    { "mData": "ctin" },
                    { "mData": "nt_num" },
                    { "mData": "nt_dt" },
                    { "mData": "inum" },
                    { "mData": "idt" },
                    { "mData": "val" },
                    { "mData": "txval" },
                    { "mData": "TotaltaxAmount" }
                ]
            });
        }

        else {
            $('#TBL_MISSINGIN2').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionAllInvoicesGSTR2,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll_gstr2',
                        "data": 'invid',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="ids" id="ids" class="chkSelectAll_gstr2" value="' + data + '" />';
                        }
                    },
                    {
                        "targets": 1,
                        "visible": false,
                        "searchable": false,
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="hidden" name="RefIds" id="RefIds" value="' + data + '" />';
                        },
                    },
                    { "mData": "gstin" },
                    { "mData": "ctin" },
                    { "mData": "inum" },
                    { "mData": "idt" },
                    { "mData": "val" },
                    { "mData": "txval" },
                    { "mData": "TotaltaxAmount" },
                    { "mData": "pos" },
                    { "mData": "inv_typ" }
                ]
            });

            $('#TBL_MISSINGIN2A').DataTable({
                destroy: true,
                "aaData": ResData.InvoiceCorrectionAllInvoicesGSTR2A,
                "aoColumns": [
                    {
                        "targets": 0,
                        "searchable": false,
                        "orderable": false,
                        "width": '2%',
                        "className": 'chkSelectAll2A_gstr2a',
                        "data": 'invid',
                        "render": function (data, type, full, meta) {
                            return '<input type="checkbox" name="ids" id="ids" class="chkSelectAll2A_gstr2a" value="' + data + '" />';
                        }
                    },
                    {
                        "targets": 1,
                        "visible": false,
                        "searchable": false,
                        "data": 'ctin_inum',
                        "render": function (data, type, full, meta) {
                            return '<input type="hidden" name="RefIds" id="RefIds" value="' + data + '" />';
                        },
                    },
                    { "mData": "gstin" },
                    { "mData": "ctin" },
                    { "mData": "inum" },
                    { "mData": "idt" },
                    { "mData": "val" },
                    { "mData": "txval" },
                    { "mData": "TotaltaxAmount" },
                    { "mData": "pos" },
                    { "mData": "inv_typ" }
                ]
            });
        }
    }
</script>

<script type="text/javascript">
    // DO NOT REMOVE : GLOBAL FUNCTIONS!
    $(document).ready(function () {

        var $checkoutForm = $('#InvoiceDataCorrectionForm').validate({
            // Rules for form validation
            rules: {

                ddlActionType: {
                    required: true
                },
            },

            // Messages for form validation
            messages: {

                ddlActionType: {
                    required: 'Please select Action'
                }

            },

            // Do not change code below
            errorPlacement: function (error, element) {
                error.insertAfter(element.parent());
            }
        });

    })
</script>

<script>
    $('input:radio').change(function (e) {

        var radio = $("input[type=radio][name='reconsetting']:checked").val();

        if (radio == "FinancialYear") {
            $("#frm").hide();
            $("#to").hide();
            $("#frmdt").show();
            $("#todt").show();
            // $("#year").show();
            $("#sname").show();
            $("$sgstin").show();
        }
        else if (radio == "FinancialPeriod") {
            $("#frmdt").hide();
            $("#todt").hide();
            // $("#year").hide();
            $("#frm").show();
            $("#to").show();
        }
        else {
            $("#frm").hide();
            $("#to").hide();
            $("#frmdt").show();
            $("#todt").show();
            // $("#year").show();
        }
    })
</script>

<script>
    $(document).ready(function ()  {

        var radio = '@Session["f_year"]';

        if (radio == "FinancialYear") {
            $("#frm").hide();
            $("#to").hide();
            $("#frmdt").show();
            $("#todt").show();
           // $("#year").show();
            $("#sname").show();
            $("$sgstin").show();
        }
        else if (radio == "FinancialPeriod") {
            $("#frmdt").hide();
            $("#todt").hide();
           // $("#year").hide();
            $("#frm").show();
            $("#to").show();
        }
        else {
            $("#frm").hide();
            $("#to").hide();f
            $("#frmdt").show();
            $("#todt").show();
           // $("#year").show();
        }
    })
</script>